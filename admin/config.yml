# Decap CMS configuration
#
# IMPORTANT (GitHub Pages auth):
# - GitHub Pages is static, so Decap needs an OAuth service.
# - We use a free Cloudflare Worker OAuth client (Sveltia CMS Authenticator).
# - Deploy it, then set base_url below to your Worker URL.
# - Your GitHub OAuth App callback URL must be: <YOUR_WORKER_URL>/callback

backend:
  name: github
  repo: rpretzer/stillgotit
  branch: main
  # REPLACE: put your Cloudflare Worker URL here (no trailing slash)
  # Example: https://stillgotit-auth.your-subdomain.workers.dev
  base_url: https://sveltia-cms-auth.rpretzer.workers.dev

# Where uploaded images are stored in the repo
media_folder: "assets/images/uploads"
# How uploaded images are referenced in the site
public_folder: "/assets/images/uploads"

# Optional: nicer editorial flow (drafts/PRs) â€” uncomment if you want it
# publish_mode: editorial_workflow

collections:
  - name: "site"
    label: "Site Content"
    files:
      - name: "settings"
        label: "Site Settings (Hero / Banner / Links)"
        file: "content/site.json"
        format: "json"
        fields:
          - label: "Hero"
            name: "hero"
            widget: "object"
            fields:
              - { label: "Tagline", name: "tagline", widget: "string" }

          - label: "Announcement Banner"
            name: "banner"
            widget: "object"
            fields:
              - { label: "Emoji", name: "emoji", widget: "string", required: false }
              - { label: "Bold label (strong)", name: "strongText", widget: "string" }
              - { label: "Text", name: "text", widget: "string" }
              - { label: "CTA Label", name: "ctaLabel", widget: "string" }
              - { label: "CTA URL", name: "ctaUrl", widget: "string" }

          - label: "Tickets / Merch Links"
            name: "tickets"
            widget: "object"
            fields:
              - { label: "Tickets Card Title", name: "ticketsTitle", widget: "string" }
              - { label: "Tickets Card Body", name: "ticketsBody", widget: "text" }
              - { label: "Ticketing URL (TicketsCandy, etc.)", name: "ticketsUrl", widget: "string" }
              - { label: "Tickets Button Label", name: "ticketsLabel", widget: "string" }
              - { label: "Tickets Note (small text)", name: "ticketsNote", widget: "string", required: false }
              - { label: "Merch Card Title", name: "squareTitle", widget: "string" }
              - { label: "Merch Card Body", name: "squareBody", widget: "text" }
              - { label: "Square Store URL", name: "squareUrl", widget: "string" }
              - { label: "Square Store Button Label", name: "squareLabel", widget: "string" }
              - { label: "Merch Note (small text)", name: "squareNote", widget: "string", required: false }

          - label: "Instagram"
            name: "instagram"
            widget: "object"
            fields:
              - { label: "Username (no @)", name: "username", widget: "string" }
              - { label: "Profile URL", name: "profileUrl", widget: "string" }
              - label: "Preview tiles"
                name: "previews"
                widget: "list"
                required: false
                summary: "{{fields.alt}}"
                fields:
                  - { label: "Image", name: "image", widget: "image" }
                  - { label: "Alt text", name: "alt", widget: "string", required: false }

          - label: "Footer"
            name: "footer"
            widget: "object"
            required: false
            fields:
              - label: "Social links"
                name: "socialLinks"
                widget: "list"
                required: false
                summary: "{{fields.label}}"
                fields:
                  - { label: "Label", name: "label", widget: "string" }
                  - { label: "URL", name: "url", widget: "string" }

          - label: "Calendar"
            name: "calendar"
            widget: "object"
            fields:
              - label: "Embed URL (optional)"
                name: "embedUrl"
                widget: "string"
                required: false
                hint: "Paste your Google Calendar embed URL or Notion embed URL. Leave blank to show the placeholder instructions."

      - name: "updates"
        label: "Latest Updates"
        file: "content/updates.json"
        format: "json"
        fields:
          - label: "Updates"
            name: "updates"
            widget: "list"
            summary: "{{fields.title}}"
            fields:
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Date", name: "date", widget: "datetime", format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
              - { label: "Pinned", name: "pinned", widget: "boolean", default: false, required: false }
              - { label: "Image", name: "image", widget: "image", required: false }
              - { label: "Image alt text", name: "alt", widget: "string", required: false }
              - { label: "Body", name: "body", widget: "text" }
              - { label: "CTA label", name: "ctaLabel", widget: "string", required: false }
              - { label: "CTA URL", name: "ctaUrl", widget: "string", required: false }
              - label: "CTA style"
                name: "ctaStyle"
                widget: "select"
                options:
                  - { label: "Primary", value: "primary" }
                  - { label: "Secondary", value: "secondary" }
                default: "primary"
