# Decap CMS configuration
#
# IMPORTANT (GitHub Pages auth):
# - GitHub Pages is static, so Decap needs an OAuth service.
# - We use a free Cloudflare Worker OAuth client (Sveltia CMS Authenticator).
# - Deploy it, then set base_url below to your Worker URL.
# - Your GitHub OAuth App callback URL must be: <YOUR_WORKER_URL>/callback

backend:
  name: github
  repo: rpretzer/stillgotit
  branch: main
  # REPLACE: put your Cloudflare Worker URL here (no trailing slash)
  # Example: https://stillgotit-auth.your-subdomain.workers.dev
  base_url: https://REPLACE_ME_WITH_YOUR_CLOUDFLARE_WORKER_URL

# Where uploaded images are stored in the repo
media_folder: "assets/images/uploads"
# How uploaded images are referenced in the site
public_folder: "/assets/images/uploads"

# Optional: nicer editorial flow (drafts/PRs) â€” uncomment if you want it
# publish_mode: editorial_workflow

collections:
  - name: "site"
    label: "Site Content"
    files:
      - name: "updates"
        label: "Latest Updates"
        file: "content/updates.json"
        format: "json"
        fields:
          - label: "Updates"
            name: "updates"
            widget: "list"
            summary: "{{fields.title}}"
            fields:
              - { label: "Title", name: "title", widget: "string" }
              - { label: "Date", name: "date", widget: "datetime", format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false }
              - { label: "Pinned", name: "pinned", widget: "boolean", default: false, required: false }
              - { label: "Image", name: "image", widget: "image", required: false }
              - { label: "Image alt text", name: "alt", widget: "string", required: false }
              - { label: "Body", name: "body", widget: "text" }
              - { label: "CTA label", name: "ctaLabel", widget: "string", required: false }
              - { label: "CTA URL", name: "ctaUrl", widget: "string", required: false }
              - label: "CTA style"
                name: "ctaStyle"
                widget: "select"
                options:
                  - { label: "Primary", value: "primary" }
                  - { label: "Secondary", value: "secondary" }
                default: "primary"
